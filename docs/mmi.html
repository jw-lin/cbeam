
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. multimode interference coupler &#8212; cbeam 0.0.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css?v=7f9a90b1" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=4acdca81"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mmi';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="advanced usage" href="advancedusage.html" />
    <link rel="prev" title="3. directional coupler" href="dc.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">cbeam 0.0.3 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basicusage.html">quickstart</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="examples.html">examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fib.html">1. fiber mode solving</a></li>
<li class="toctree-l2"><a class="reference internal" href="PL.html">2. photonic lantern</a></li>
<li class="toctree-l2"><a class="reference internal" href="dc.html">3. directional coupler</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">4. multimode interference coupler</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="advancedusage.html">advanced usage</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="wvgdes.html">1. making custom waveguides</a></li>
<li class="toctree-l2"><a class="reference internal" href="meshing.html">2. meshing</a></li>
<li class="toctree-l2"><a class="reference internal" href="propsettings.html">3. propagator settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">4. resampling and evaluating fields</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="cbeam.waveguide.html">cbeam.waveguide</a></li>
<li class="toctree-l2"><a class="reference internal" href="cbeam.propagator.html">cbeam.propagator</a></li>
<li class="toctree-l2"><a class="reference internal" href="cbeam.FEval.html">cbeam.FEval</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jw-lin/cbeam" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jw-lin/cbeam/edit/main/docs_source/mmi.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/mmi.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>multimode interference coupler</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#waveguide-setup">4.1. waveguide setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-waveguide">4.2. access waveguide</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mmi-characterization">4.3. MMI characterization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-between-meshes">4.4. moving between meshes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#propagation">4.5. propagation</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="multimode-interference-coupler">
<h1><span class="section-number">4. </span>multimode interference coupler<a class="headerlink" href="#multimode-interference-coupler" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#waveguide-setup" id="id3">waveguide setup</a></p></li>
<li><p><a class="reference internal" href="#access-waveguide" id="id4">access waveguide</a></p></li>
<li><p><a class="reference internal" href="#mmi-characterization" id="id5">MMI characterization</a></p></li>
<li><p><a class="reference internal" href="#moving-between-meshes" id="id6">moving between meshes</a></p></li>
<li><p><a class="reference internal" href="#propagation" id="id7">propagation</a></p></li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example is for a <em>weakly guided</em> multimode interference (MMI) coupler, which is a little unusual: typical MMI couplers use strong index contrasts and have highly confined modes, which I think give better performance.</p>
</div>
<p>A multimode interference (MMI) coupler can be constructed using a series of <span class="math notranslate nohighlight">\(M\)</span> “access” waveguides and <span class="math notranslate nohighlight">\(N\)</span> output waveguides which are connected in the middle by a larger, multimoded slab waveguide. Under certain design parameters, an MMI coupler acts as an <span class="math notranslate nohighlight">\(M\times N\)</span> beam recombiner. Such devices leverage the “self-imaging” property of the central slab waveguide. This section presents a partial simulation of a <span class="math notranslate nohighlight">\(1 \times 3\)</span> MMI coupler, and also shows how electric fields from one waveguide mesh can be transferred to another.</p>
<section id="waveguide-setup">
<h2><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">4.1. </span>waveguide setup</a><a class="headerlink" href="#waveguide-setup" title="Link to this heading">#</a></h2>
<p>Below, I lay out some parameters. Both the access waveguide and center waveguide are modeled as rectangular core step-index fibers, which we will model separately.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cbeam.waveguide</span> <span class="kn">import</span> <span class="n">RectangularStepIndexFiber</span>

<span class="n">mmi_width</span> <span class="o">=</span> <span class="mf">60.</span> <span class="c1"># width of the slab&#39;s core</span>
<span class="n">mmi_height</span> <span class="o">=</span> <span class="mf">6.</span> <span class="c1"># height of the slab&#39;s core</span>

<span class="n">access_width</span> <span class="o">=</span> <span class="mf">6.</span> <span class="c1"># same for the access waveguide</span>
<span class="n">access_height</span> <span class="o">=</span> <span class="mf">6.</span>

<span class="n">wl</span> <span class="o">=</span> <span class="mf">1.55</span>   <span class="c1"># wavelength</span>

<span class="n">ncore</span> <span class="o">=</span> <span class="mf">1.445</span>   <span class="c1"># core index</span>
<span class="n">nclad</span> <span class="o">=</span> <span class="mf">1.44</span>    <span class="c1"># cladding index</span>

<span class="n">access</span> <span class="o">=</span> <span class="n">RectangularStepIndexFiber</span><span class="p">(</span><span class="n">access_width</span><span class="p">,</span><span class="n">access_height</span><span class="p">,</span><span class="n">access_height</span><span class="o">*</span><span class="mi">6</span><span class="p">,</span><span class="n">access_width</span><span class="o">*</span><span class="mi">6</span><span class="p">,</span><span class="n">ncore</span><span class="p">,</span><span class="n">nclad</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">mmi</span> <span class="o">=</span> <span class="n">RectangularStepIndexFiber</span><span class="p">(</span><span class="n">mmi_width</span><span class="p">,</span><span class="n">mmi_height</span><span class="p">,</span><span class="n">mmi_width</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span><span class="n">mmi_height</span><span class="o">*</span><span class="mi">6</span><span class="p">,</span><span class="n">ncore</span><span class="p">,</span><span class="n">nclad</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">5.</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-1.py">Source code</a>)</p>
<p>Let’s plot the meshes and refractive indices for both the access waveguide and central MMI section.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">access</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>
<span class="n">mmi</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># lower the mesh line transparency</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-2.py">Source code</a>)</p>
<figure class="align-default" id="id1">
<img alt="_images/mmi-2_00.png" class="plot-directive" src="_images/mmi-2_00.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//mmi-2_00.png">png</a>, <a class="reference external" href=".//mmi-2_00.hires.png">hires.png</a>, <a class="reference external" href=".//mmi-2_00.pdf">pdf</a>)</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="_images/mmi-2_01.png" class="plot-directive" src="_images/mmi-2_01.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//mmi-2_01.png">png</a>, <a class="reference external" href=".//mmi-2_01.hires.png">hires.png</a>, <a class="reference external" href=".//mmi-2_01.pdf">pdf</a>)</span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="access-waveguide">
<h2><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">4.2. </span>access waveguide</a><a class="headerlink" href="#access-waveguide" title="Link to this heading">#</a></h2>
<p>In our <span class="math notranslate nohighlight">\(1\times 3\)</span> MMI coupler design, the access waveguide is centrally connected to one end of the central slab. Thus, to determine our launch field in the central slab, we will first do a mode solve of the access waveguide.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cbeam.propagator</span> <span class="kn">import</span> <span class="n">Propagator</span>

<span class="n">access_prop</span> <span class="o">=</span> <span class="n">Propagator</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span><span class="n">access</span><span class="p">,</span><span class="n">Nmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ac_neffs</span><span class="p">,</span><span class="n">ac_modes</span> <span class="o">=</span> <span class="n">access_prop</span><span class="o">.</span><span class="n">solve_at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">access_prop</span><span class="o">.</span><span class="n">plot_cfield</span><span class="p">(</span><span class="n">ac_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">show_mesh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-3.py">Source code</a>, <a class="reference external" href=".//mmi-3.png">png</a>, <a class="reference external" href=".//mmi-3.hires.png">hires.png</a>, <a class="reference external" href=".//mmi-3.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/mmi-3.png" class="plot-directive" src="_images/mmi-3.png" />
</figure>
<p>The above is the field we’ll launch into the slab.</p>
</section>
<section id="mmi-characterization">
<h2><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">4.3. </span>MMI characterization</a><a class="headerlink" href="#mmi-characterization" title="Link to this heading">#</a></h2>
<p>Next, we’ll compute the propagation characteristics of the slab. Mathematically, this is super simple because the waveguide doesn’t change with <span class="math notranslate nohighlight">\(z\)</span>, and all the coupling coefficients are 0. But the syntax is the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># last time i checked there are 8 guided modes</span>
<span class="c1"># you can double check though.</span>
<span class="n">mmi_prop</span> <span class="o">=</span> <span class="n">Propagator</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span><span class="n">mmi</span><span class="p">,</span><span class="n">Nmax</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">mmi_prop</span><span class="o">.</span><span class="n">characterize</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-4.py">Source code</a>)</p>
</section>
<section id="moving-between-meshes">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">4.4. </span>moving between meshes</a><a class="headerlink" href="#moving-between-meshes" title="Link to this heading">#</a></h2>
<p>Next, we will “transfer” our launch field, which is defined on the access waveguide mesh, to the mesh of the slab waveguide section. To do this, we will use <code class="docutils literal notranslate"><span class="pre">cbeam.FEval.resample()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cbeam</span> <span class="kn">import</span> <span class="n">FEval</span>

<span class="c1"># resample takes: input field, input mesh, output mesh</span>
<span class="n">launch_field</span> <span class="o">=</span> <span class="n">FEval</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">ac_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">access_prop</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span><span class="n">mmi_prop</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>

<span class="c1"># we&#39;ll plot to make sure it looks good</span>
<span class="n">mmi_prop</span><span class="o">.</span><span class="n">plot_cfield</span><span class="p">(</span><span class="n">launch_field</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span><span class="n">show_mesh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-5.py">Source code</a>, <a class="reference external" href=".//mmi-5.png">png</a>, <a class="reference external" href=".//mmi-5.hires.png">hires.png</a>, <a class="reference external" href=".//mmi-5.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/mmi-5.png" class="plot-directive" src="_images/mmi-5.png" />
</figure>
<p>The last step before propagation is to convert our field into a mode amplitude vector, which is done using <code class="docutils literal notranslate"><span class="pre">Propagator.make_mode_vector()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">launch_modes</span> <span class="o">=</span> <span class="n">mmi_prop</span><span class="o">.</span><span class="n">make_mode_vector</span><span class="p">(</span><span class="n">launch_field</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">launch_modes</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-6.py">Source code</a>)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[6.59948619e-01 3.83775210e-05 -5.32959493e-01 2.76286527e-05 -3.80385142e-01 3.48737666e-05 2.56268483e-01 3.06148543e-05]
</pre></div>
</div>
<p>The total power of the above turns out to be less than 1, indicating that some power will be lost to radiative modes. These losses can be mitigated by tapering the access waveguide (like the tapered box fiber in <a class="reference internal" href="fib.html"><span class="doc">fiber mode solving</span></a>), though this is outside the scope of the example.</p>
</section>
<section id="propagation">
<h2><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">4.5. </span>propagation</a><a class="headerlink" href="#propagation" title="Link to this heading">#</a></h2>
<p>One nuance in this example is that we don’t need to formally propagate, since all the coupling coefficients are 0. The power in each mode is preserved; the only thing we need to do is apply the phase evolution for each mode. This means we can directly view the fields with <code class="docutils literal notranslate"><span class="pre">Propagator.make_fields()</span></code>. I will plot the field at the expected <span class="math notranslate nohighlight">\(z\)</span> coordinate for a three-fold self image.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">betas</span> <span class="o">=</span> <span class="n">mmi_prop</span><span class="o">.</span><span class="n">neffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">wl</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="p">(</span><span class="n">betas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">betas</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">mmi_prop</span><span class="o">.</span><span class="n">make_field</span><span class="p">(</span><span class="n">launch_modes</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="n">L</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">apply_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">mmi_prop</span><span class="o">.</span><span class="n">plot_cfield</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span><span class="n">show_mesh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># you could also do</span>
<span class="c1"># zs,us,uf = mmi_prop.propagate(launch_mvec,0,L/4)</span>
<span class="c1"># f = prop.make_field(uf,apply_phase=False)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//mmi-7.py">Source code</a>, <a class="reference external" href=".//mmi-7.png">png</a>, <a class="reference external" href=".//mmi-7.hires.png">hires.png</a>, <a class="reference external" href=".//mmi-7.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/mmi-7.png" class="plot-directive" src="_images/mmi-7.png" />
</figure>
<p>We get three images of the launch field, as expected. From this point, we could construct a 3-channel output waveguide to couple this field into. Splitting the beam further seems difficult with this design, likely because it is only weakly guiding.</p>
<p>For reference, I used the following formulas to compute the required self-imaging distance. Denote <span class="math notranslate nohighlight">\(\beta_j\)</span> the propagation constant of mode <span class="math notranslate nohighlight">\(j\)</span>, which is related to <span class="math notranslate nohighlight">\(n_j\)</span>, the effective index of mode <span class="math notranslate nohighlight">\(j\)</span>, by <span class="math notranslate nohighlight">\(\beta_j=k n_j\)</span> ; <span class="math notranslate nohighlight">\(k\)</span> is the free-space wavenumber. Define the beat length between the two lowest-order modes as</p>
<div class="math notranslate nohighlight">
\[L_\pi \equiv \dfrac{\pi}{\beta_0-\beta_1}.\]</div>
<p>When launching a symmetric field, the first <span class="math notranslate nohighlight">\(N\)</span>-fold self-image will be formed at a distance</p>
<div class="math notranslate nohighlight">
\[L = \dfrac{3 L_\pi}{4N}.\]</div>
<p><strong>References</strong></p>
<ol class="arabic simple">
<li><ol class="upperalpha simple" start="12">
<li><ol class="upperalpha simple" start="2">
<li><p>Soldano and E. C. M. Pennings, “Optical multi-mode interference devices based on self-imaging: principles and applications,” in Journal of Lightwave Technology, vol. 13, no. 4, pp. 615-627, April 1995, doi: 10.1109/50.372474.</p></li>
</ol>
</li>
</ol>
</li>
</ol>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="dc.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3. </span>directional coupler</p>
      </div>
    </a>
    <a class="right-next"
       href="advancedusage.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">advanced usage</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#waveguide-setup">4.1. waveguide setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-waveguide">4.2. access waveguide</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mmi-characterization">4.3. MMI characterization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-between-meshes">4.4. moving between meshes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#propagation">4.5. propagation</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jon Lin
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Jon Lin.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>